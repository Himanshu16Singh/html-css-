<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8'>
<title>Animation with js</title>
<style>
#myCanvas{
border: 1px solid black;
}
</style>
<script>
var canvas , ctx;
var rectangleX = 0 ;
var colors = ['red','green','yellow'];
var currentColor = 0 ;
var speed = 1;
function init(){
// this function is called after the page is loaded
//1- Get the canvas
canvas = document.getElementById('myCanvas');
//2- Get the context
ctx = canvas.getContext('2d');
//3- we can draw
// drawSomething();
// setInterval(animate,1000);
// setTimeout(animate,100);

requestAnimationFrame(animate);
setInterval(changeColor,1000);
}

/*function drawSomething()
{
//draw a red rectangle
ctx.fillStyle = '#FF0000';
ctx.fillRect(0,0,80,100);
}*/

function animate(){
// -1 clear canvas
ctx.clearRect(0,0,canvas.width,canvas.height);

// -2 draw a red rectangle
// ctx.fillStyle = '#FF0000';
// ctx.fillRect(10*Math.random()*10,0,80,100);
ctx.fillRect(rectangleX,0,80,100);

// -3 move the shapes
// rectangleX = rectangleX+1 ;
rectangleX = rectangleX+speed ;

// call again the animate function after 100ms
// setTimeout(animate,100);
requestAnimationFrame(animate);

if(rectangleX+80 > 200 || rectangleX <=0){
speed = -speed;
}
}

function changeColor(){
ctx.fillStyle = colors[currentColor%3];
currentColor += 1 ;
speed += 1;
}
</script>
</head>
<body onload='init();'>
<canvas id='myCanvas' width="200" height='200'>
Your browser does not support the canvas tag.</canvas>
</body>
</html>